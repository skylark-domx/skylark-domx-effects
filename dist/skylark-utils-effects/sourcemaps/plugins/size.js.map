{"version":3,"sources":["plugins/size.js"],"names":["define","langx","$","effects","options","done","baseline","factor","temp","element","this","cProps","vProps","hProps","mode","restore","scale","origin","position","css","pos","original","scaledDimensions","from","to","createPlaceholder","y","height","x","width","setTransition","getBaseline","top","outerHeight","left","outerWidth","concat","find","each","child","childOriginal","childFrom","childTo","saveStyle","animate","duration","easing","restoreStyle","queue","complete","offset","opacity"],"mappings":"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","file":"../../plugins/size.js","sourcesContent":["define( [\n\t\"skylark-langx/langx\",\n\t\"skylark-utils/query\",\n\t\"../effects\"\n], function(langx,$,effects) {\nreturn effects.define( \"size\", function( options, done ) {\n\n\t// Create element\n\tvar baseline, factor, temp,\n\t\telement = $( this ),\n\n\t\t// Copy for children\n\t\tcProps = [ \"fontSize\" ],\n\t\tvProps = [ \"borderTopWidth\", \"borderBottomWidth\", \"paddingTop\", \"paddingBottom\" ],\n\t\thProps = [ \"borderLeftWidth\", \"borderRightWidth\", \"paddingLeft\", \"paddingRight\" ],\n\n\t\t// Set options\n\t\tmode = options.mode,\n\t\trestore = mode !== \"effect\",\n\t\tscale = options.scale || \"both\",\n\t\torigin = options.origin || [ \"middle\", \"center\" ],\n\t\tposition = element.css( \"position\" ),\n\t\tpos = element.position(),\n\t\toriginal = effects.scaledDimensions( element ),\n\t\tfrom = options.from || original,\n\t\tto = options.to || effects.scaledDimensions( element, 0 );\n\n\teffects.createPlaceholder( element );\n\n\tif ( mode === \"show\" ) {\n\t\ttemp = from;\n\t\tfrom = to;\n\t\tto = temp;\n\t}\n\n\t// Set scaling factor\n\tfactor = {\n\t\tfrom: {\n\t\t\ty: from.height / original.height,\n\t\t\tx: from.width / original.width\n\t\t},\n\t\tto: {\n\t\t\ty: to.height / original.height,\n\t\t\tx: to.width / original.width\n\t\t}\n\t};\n\n\t// Scale the css box\n\tif ( scale === \"box\" || scale === \"both\" ) {\n\n\t\t// Vertical props scaling\n\t\tif ( factor.from.y !== factor.to.y ) {\n\t\t\tfrom = effects.setTransition( element, vProps, factor.from.y, from );\n\t\t\tto = effects.setTransition( element, vProps, factor.to.y, to );\n\t\t}\n\n\t\t// Horizontal props scaling\n\t\tif ( factor.from.x !== factor.to.x ) {\n\t\t\tfrom = effects.setTransition( element, hProps, factor.from.x, from );\n\t\t\tto = effects.setTransition( element, hProps, factor.to.x, to );\n\t\t}\n\t}\n\n\t// Scale the content\n\tif ( scale === \"content\" || scale === \"both\" ) {\n\n\t\t// Vertical props scaling\n\t\tif ( factor.from.y !== factor.to.y ) {\n\t\t\tfrom = effects.setTransition( element, cProps, factor.from.y, from );\n\t\t\tto = effects.setTransition( element, cProps, factor.to.y, to );\n\t\t}\n\t}\n\n\t// Adjust the position properties based on the provided origin points\n\tif ( origin ) {\n\t\tbaseline = effects.getBaseline( origin, original );\n\t\tfrom.top = ( original.outerHeight - from.outerHeight ) * baseline.y + pos.top;\n\t\tfrom.left = ( original.outerWidth - from.outerWidth ) * baseline.x + pos.left;\n\t\tto.top = ( original.outerHeight - to.outerHeight ) * baseline.y + pos.top;\n\t\tto.left = ( original.outerWidth - to.outerWidth ) * baseline.x + pos.left;\n\t}\n\telement.css( from );\n\n\t// Animate the children if desired\n\tif ( scale === \"content\" || scale === \"both\" ) {\n\n\t\tvProps = vProps.concat( [ \"marginTop\", \"marginBottom\" ] ).concat( cProps );\n\t\thProps = hProps.concat( [ \"marginLeft\", \"marginRight\" ] );\n\n\t\t// Only animate children with width attributes specified\n\t\t// TODO: is this right? should we include anything with css width specified as well\n\t\telement.find( \"*[width]\" ).each( function() {\n\t\t\tvar child = $( this ),\n\t\t\t\tchildOriginal = effects.scaledDimensions( child ),\n\t\t\t\tchildFrom = {\n\t\t\t\t\theight: childOriginal.height * factor.from.y,\n\t\t\t\t\twidth: childOriginal.width * factor.from.x,\n\t\t\t\t\touterHeight: childOriginal.outerHeight * factor.from.y,\n\t\t\t\t\touterWidth: childOriginal.outerWidth * factor.from.x\n\t\t\t\t},\n\t\t\t\tchildTo = {\n\t\t\t\t\theight: childOriginal.height * factor.to.y,\n\t\t\t\t\twidth: childOriginal.width * factor.to.x,\n\t\t\t\t\touterHeight: childOriginal.height * factor.to.y,\n\t\t\t\t\touterWidth: childOriginal.width * factor.to.x\n\t\t\t\t};\n\n\t\t\t// Vertical props scaling\n\t\t\tif ( factor.from.y !== factor.to.y ) {\n\t\t\t\tchildFrom = effects.setTransition( child, vProps, factor.from.y, childFrom );\n\t\t\t\tchildTo = effects.setTransition( child, vProps, factor.to.y, childTo );\n\t\t\t}\n\n\t\t\t// Horizontal props scaling\n\t\t\tif ( factor.from.x !== factor.to.x ) {\n\t\t\t\tchildFrom = effects.setTransition( child, hProps, factor.from.x, childFrom );\n\t\t\t\tchildTo = effects.setTransition( child, hProps, factor.to.x, childTo );\n\t\t\t}\n\n\t\t\tif ( restore ) {\n\t\t\t\teffects.saveStyle( child );\n\t\t\t}\n\n\t\t\t// Animate children\n\t\t\tchild.css( childFrom );\n\t\t\tchild.animate( childTo, options.duration, options.easing, function() {\n\n\t\t\t\t// Restore children\n\t\t\t\tif ( restore ) {\n\t\t\t\t\teffects.restoreStyle( child );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\t// Animate\n\telement.animate( to, {\n\t\tqueue: false,\n\t\tduration: options.duration,\n\t\teasing: options.easing,\n\t\tcomplete: function() {\n\n\t\t\tvar offset = element.offset();\n\n\t\t\tif ( to.opacity === 0 ) {\n\t\t\t\telement.css( \"opacity\", from.opacity );\n\t\t\t}\n\n\t\t\tif ( !restore ) {\n\t\t\t\telement\n\t\t\t\t\t.css( \"position\", position === \"static\" ? \"relative\" : position )\n\t\t\t\t\t.offset( offset );\n\n\t\t\t\t// Need to save style here so that automatic style restoration\n\t\t\t\t// doesn't restore to the original styles from before the animation.\n\t\t\t\teffects.saveStyle( element );\n\t\t\t}\n\n\t\t\tdone();\n\t\t}\n\t} );\n\n} );\n\n});\n"]}