{"version":3,"sources":["plugins/pulsate.js"],"names":["define","langx","$","effects","options","done","doAnimate","element","properties","duration","ease","d","Deferred","animate","resolve","promise","this","mode","show","hide","showhide","anims","times","animateTo","i","is","css","funcs","push","opacity","easing","reduce","prev","curr","index","array","then"],"mappings":";;;;;;;AAAAA,QACC,sBACA,sBACA,cACE,SAASC,EAAMC,EAAEC,GACpB,MAAOA,GAAQH,OAAQ,UAAW,OAAQ,SAAUI,EAASC,GAuB5D,QAASC,GAAUC,EAAQC,EAAYC,EAAUC,GAChD,MAAO,YACN,GAAIC,GAAI,GAAIC,EAKZ,OAHAL,GAAQM,QAASL,EAAYC,EAAUC,EAAM,WAC5CC,EAAEG,YAEIH,EAAEI,SA7BX,GAAIR,GAAUL,EAAGc,MAChBC,EAAOb,EAAQa,KACfC,EAAgB,SAATD,EACPE,EAAgB,SAATF,EACPG,EAAWF,GAAQC,EAGnBE,EAAmC,GAAvBjB,EAAQkB,OAAS,IAAcF,EAAW,EAAI,GAC1DX,EAAWL,EAAQK,SAAWY,EAC9BE,EAAY,EACZC,EAAI,GAEAN,GAASX,EAAQkB,GAAI,cACzBlB,EAAQmB,IAAK,UAAW,GAAIR,OAC5BK,EAAY,EAqBb,KAhBA,GAAIX,GAAWX,EAAMW,SACjBe,KAeIH,EAAIH,EAAOG,IAClBG,EAAMC,KAAKtB,EAAUC,GAAUsB,QAASN,GAAad,EAAUL,EAAQ0B,SACvEP,EAAY,EAAIA,CAGdI,GAAMC,KAAKtB,EAAUC,GAAUsB,QAASN,GAAad,EAAUL,EAAQ0B,SAE1EH,EAAMC,KAAKvB,GACXsB,EAAMI,OAAO,SAASC,EAAMC,EAAMC,EAAOC,GACtC,MAAOH,GAAKI,KAAKH,IACjBrB,EAASE","file":"../../plugins/pulsate.js","sourcesContent":["define( [\r\n\t\"skylark-langx/langx\",\r\n\t\"skylark-utils/query\",\r\n\t\"../effects\"\r\n], function(langx,$,effects) {\r\nreturn effects.define( \"pulsate\", \"show\", function( options, done ) {\r\n\tvar element = $( this ),\r\n\t\tmode = options.mode,\r\n\t\tshow = mode === \"show\",\r\n\t\thide = mode === \"hide\",\r\n\t\tshowhide = show || hide,\r\n\r\n\t\t// Showing or hiding leaves off the \"last\" animation\r\n\t\tanims = ( ( options.times || 5 ) * 2 ) + ( showhide ? 1 : 0 ),\r\n\t\tduration = options.duration / anims,\r\n\t\tanimateTo = 0,\r\n\t\ti = 1;\r\n\r\n\tif ( show || !element.is( \":visible\" ) ) {\r\n\t\telement.css( \"opacity\", 0 ).show();\r\n\t\tanimateTo = 1;\r\n\t}\r\n\r\n\t// Anims - 1 opacity \"toggles\"\r\n\r\n\tvar Deferred = langx.Deferred;\r\n\tvar funcs = [];\r\n\r\n\tfunction doAnimate(element,properties, duration, ease) {\r\n\t\treturn function() {\r\n\t\t\tvar d = new Deferred();\r\n\r\n\t\t\telement.animate( properties, duration, ease ,function(){\r\n\t\t\t\td.resolve();\r\n\t\t\t});\r\n\t\t\treturn d.promise;\r\n\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfor ( ; i < anims; i++ ) {\r\n\t\tfuncs.push(doAnimate(element,{ opacity: animateTo }, duration, options.easing ));\r\n\t\tanimateTo = 1 - animateTo;\r\n\t}\r\n\r\n    funcs.push(doAnimate(element,{ opacity: animateTo }, duration, options.easing ));\r\n\r\n\tfuncs.push(done);\r\n\tfuncs.reduce(function(prev, curr, index, array) {\r\n  \t\treturn prev.then(curr);\r\n\t}, Deferred.resolve());\r\n\r\n} );\r\n\r\n});\r\n"]}